<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Connexion - Documents Durand</title>
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
  <div class="auth-wrap">
    <div class="auth-card">
      <h1 class="auth-title">Accès protégé</h1>
      <p class="auth-desc">Saisis le mot de passe pour accéder au site.</p>

      <!-- ✅ VRAI FORMULAIRE => déclenche la proposition d’enregistrement navigateur -->
      <form id="loginForm" autocomplete="on">
        <!-- ✅ Username caché : aide les gestionnaires de mots de passe -->
        <input
          id="username"
          name="username"
          type="text"
          autocomplete="username"
          value="durand"
          aria-hidden="true"
          tabindex="-1"
          style="position:absolute; left:-9999px; width:1px; height:1px; opacity:0;"
        />

        <div class="auth-row">
          <input
            id="password"
            name="password"
            class="auth-input"
            type="password"
            placeholder="Mot de passe"
            autocomplete="current-password"
            required
          />
          <button class="auth-btn" type="submit">Entrer</button>
        </div>

        <div id="loginError" class="auth-error"></div>
      </form>

      <div class="small-note">
        <b>Note :</b> ce système reproduit le “mot de passe de site” (style Wix) via le navigateur.
        Pour une sécurité forte (vrai contrôle d’accès), il faudra une authentification côté serveur.
      </div>
    </div>
  </div>

  <script>window.__SITE_PREFIX__="";</script>
  <script src="assets/auth.js"></script>
  <script>
    (function(){
      // Utilise la fonction "wireLoginForm" du nouveau auth.js
      // (elle gère redirect + erreurs + autocomplete)
      wireLoginForm({
        formId: "loginForm",
        usernameId: "username",
        passwordId: "password",
        errorId: "loginError"
      });

      document.getElementById("password").focus();
    })();
  </script>
</body>
</html>
